{"cells":[{"cell_type":"markdown","metadata":{"id":"OvwmRrQKgT7z"},"source":["–ß—Ç–æ –∑–¥–µ—Å—å: —è –¥–µ–ª–∞—é –ø—Ä–æ–±–Ω–æ–≥–æ (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ) —Ç–µ–ª–µ–≥—Ä–∞–º–º-–±–æ—Ç–∞ FizikaRu"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":6179,"status":"ok","timestamp":1699967694578,"user":{"displayName":"–ò–≥–æ—Ä—å –ö—Ä–∏–≤—á–µ–Ω–∫–æ","userId":"14793420197005512201"},"user_tz":-180},"id":"hHW9tou9gLaw","outputId":"fdbb6c58-0457-46b7-9eda-68679831bf19"},"outputs":[{"name":"stdout","output_type":"stream","text":["\u001b[?25l     \u001b[90m‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\u001b[0m \u001b[32m0.0/243.1 kB\u001b[0m \u001b[31m?\u001b[0m eta \u001b[36m-:--:--\u001b[0m\r\u001b[2K     \u001b[91m‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\u001b[0m\u001b[90m‚ï∫\u001b[0m\u001b[90m‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\u001b[0m \u001b[32m194.6/243.1 kB\u001b[0m \u001b[31m5.8 MB/s\u001b[0m eta \u001b[36m0:00:01\u001b[0m\r\u001b[2K     \u001b[90m‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\u001b[0m \u001b[32m243.1/243.1 kB\u001b[0m \u001b[31m5.5 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25h  Preparing metadata (setup.py) ... \u001b[?25l\u001b[?25hdone\n","  Building wheel for pyTelegramBotAPI (setup.py) ... \u001b[?25l\u001b[?25hdone\n"]}],"source":["!pip -q install pyTelegramBotAPI\n","import telebot"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":153},"executionInfo":{"elapsed":638,"status":"ok","timestamp":1699967695207,"user":{"displayName":"–ò–≥–æ—Ä—å –ö—Ä–∏–≤—á–µ–Ω–∫–æ","userId":"14793420197005512201"},"user_tz":-180},"id":"LrVei0n_frFz","outputId":"1acab4ba-162c-4dcd-9461-45fa06642a86"},"outputs":[{"data":{"text/html":["\n","  <div id=\"df-f42a9301-6eb5-4ddf-8a0c-2128410972a8\" class=\"colab-df-container\">\n","    <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>id_chat</th>\n","      <th>id_worker</th>\n","      <th>id_in</th>\n","      <th>message_in</th>\n","      <th>time_in</th>\n","      <th>id_out</th>\n","      <th>message_out</th>\n","      <th>time_out</th>\n","      <th>original_links</th>\n","      <th>rating_worker</th>\n","      <th>original_chuncs</th>\n","      <th>rating_expert</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>0</th>\n","      <td>0</td>\n","      <td>0</td>\n","      <td>0</td>\n","      <td>!!! –°–æ–∑–¥–∞–Ω–∞ –Ω–æ–≤–∞—è –±–∞–∑–∞ –¥–∏–∞–ª–æ–≥–æ–≤</td>\n","      <td>2023-11-14 13:14:55</td>\n","      <td>0</td>\n","      <td>–°–æ—Ö—Ä–∞–Ω–µ–Ω –ø—Ä–æ–±–Ω—ã–π —Ñ–∞–π–ª-csv</td>\n","      <td>2023-11-14 13:14:55</td>\n","      <td>{–∑–¥–µ—Å—å –±—É–¥—É—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ –¥–æ–∫–∏ –∏ —Ñ–æ—Ç–æ-–≤–∏–¥–µ–æ}</td>\n","      <td>0</td>\n","      <td>{–∑–¥–µ—Å—å –±—É–¥—É—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—ã –Ω–∞—à–µ–¥—à–∏—Ö—Å—è —á–∞–Ω–∫–æ–≤}</td>\n","      <td>0</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>\n","    <div class=\"colab-df-buttons\">\n","\n","  <div class=\"colab-df-container\">\n","    <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-f42a9301-6eb5-4ddf-8a0c-2128410972a8')\"\n","            title=\"Convert this dataframe to an interactive table.\"\n","            style=\"display:none;\">\n","\n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\">\n","    <path d=\"M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z\"/>\n","  </svg>\n","    </button>\n","\n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    .colab-df-buttons div {\n","      margin-bottom: 4px;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","    <script>\n","      const buttonEl =\n","        document.querySelector('#df-f42a9301-6eb5-4ddf-8a0c-2128410972a8 button.colab-df-convert');\n","      buttonEl.style.display =\n","        google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","      async function convertToInteractive(key) {\n","        const element = document.querySelector('#df-f42a9301-6eb5-4ddf-8a0c-2128410972a8');\n","        const dataTable =\n","          await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                    [key], {});\n","        if (!dataTable) return;\n","\n","        const docLinkHtml = 'Like what you see? Visit the ' +\n","          '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","          + ' to learn more about interactive tables.';\n","        element.innerHTML = '';\n","        dataTable['output_type'] = 'display_data';\n","        await google.colab.output.renderOutput(dataTable, element);\n","        const docLink = document.createElement('div');\n","        docLink.innerHTML = docLinkHtml;\n","        element.appendChild(docLink);\n","      }\n","    </script>\n","  </div>\n","\n","    </div>\n","  </div>\n"],"text/plain":["   id_chat  id_worker  id_in                       message_in  \\\n","0        0          0      0  !!! –°–æ–∑–¥–∞–Ω–∞ –Ω–æ–≤–∞—è –±–∞–∑–∞ –¥–∏–∞–ª–æ–≥–æ–≤   \n","\n","              time_in  id_out                message_out            time_out  \\\n","0 2023-11-14 13:14:55       0  –°–æ—Ö—Ä–∞–Ω–µ–Ω –ø—Ä–æ–±–Ω—ã–π —Ñ–∞–π–ª-csv 2023-11-14 13:14:55   \n","\n","                              original_links  rating_worker  \\\n","0  {–∑–¥–µ—Å—å –±—É–¥—É—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ –¥–æ–∫–∏ –∏ —Ñ–æ—Ç–æ-–≤–∏–¥–µ–æ}              0   \n","\n","                             original_chuncs  rating_expert  \n","0  {–∑–¥–µ—Å—å –±—É–¥—É—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—ã –Ω–∞—à–µ–¥—à–∏—Ö—Å—è —á–∞–Ω–∫–æ–≤}              0  "]},"execution_count":2,"metadata":{},"output_type":"execute_result"}],"source":["# –°–æ–∑–¥–∞–µ–º –ë–î –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥–æ–≤\n","\n","import pandas as pd\n","\n","col_names =  ['id_chat', 'id_worker', # –≤—Ä–µ–º–µ–Ω–Ω–æ –≤–º–µ—Å—Ç–æ id –±—É–¥–µ—Ç –∏–º—è-—Ñ–∞–º–∏–ª–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞\n","              'id_in', 'message_in', 'time_in',\n","              'id_out', 'message_out', 'time_out',\n","              'original_links', 'rating_worker',\n","              'original_chuncs', 'rating_expert'\n","              ]\n","df_zemtec = pd.DataFrame(columns = col_names)\n","\n","# –¥–æ–±–∞–≤–∏–º –Ω—É–ª–µ–≤—É—é —Å—Ç—Ä–æ–∫—É —Å–ª—É–∂–µ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏\n","datetimenow = pd.Timestamp.today().floor('S')\n","df_zemtec.loc[ len(df_zemtec.index) ] = [0, 0,\n","                                         0, '!!! –°–æ–∑–¥–∞–Ω–∞ –Ω–æ–≤–∞—è –±–∞–∑–∞ –¥–∏–∞–ª–æ–≥–æ–≤', datetimenow,\n","                                         0, '–°–æ—Ö—Ä–∞–Ω–µ–Ω –ø—Ä–æ–±–Ω—ã–π —Ñ–∞–π–ª-csv', datetimenow,\n","                                        '{–∑–¥–µ—Å—å –±—É–¥—É—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ –¥–æ–∫–∏ –∏ —Ñ–æ—Ç–æ-–≤–∏–¥–µ–æ}', 0,\n","                                        '{–∑–¥–µ—Å—å –±—É–¥—É—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—ã –Ω–∞—à–µ–¥—à–∏—Ö—Å—è —á–∞–Ω–∫–æ–≤}', 0\n","                                        ]\n","# —Å–æ—Ö—Ä–∞–Ω–∏–º –¥–∞—Ç–∞—Ñ—Ä–µ–π–º –≤ —Ñ–∞–π–ª –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –æ—à–∏–±–∫—É –∑–∞–ø–∏—Å–∏\n","df_zemtec.to_csv('df_zemtec.csv', index=False, header=True)\n","\n","df_zemtec"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"eDzKlzdIz32J"},"outputs":[],"source":["# –§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—Ç–∏—Ç –∏–Ω–¥–µ–∫—Å –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å—Ç—Ä–æ–∫–∏ –æ—Ç —é–∑–µ—Ä–∞: –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤ –±–∞–∑—É –æ—Ü–µ–Ω–∫–∏ —é–∑–µ—Ä–æ–º –æ—Ç–≤–µ—Ç–∞ –Ω–µ–π—Ä–æ–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç–∞\n","\n","def lastrow_worker(chat_id): return df_zemtec.index[df_zemtec['id_chat']==chat_id].tolist()[-1]"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"GWt3RjUQrPOh"},"outputs":[],"source":["from telebot import types"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"0jfldLWpggMf"},"outputs":[],"source":["# –£–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω –¥–ª—è FizikaRu_TBot\n","\n","token = '' # —ç—Ç–æ –≤–∞—à —Å–µ–∫—Ä–µ—Ç–Ω—ã–π —Ç–æ–∫–µ–Ω\n","botFizikaRu = telebot.TeleBot(token)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"cEM8PDp2yN72"},"outputs":[],"source":["btn1_text = \"üëã –ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏\"\n","btn2_text = \"ü§ì –¢–µ–∫—Å—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π\"\n","btn3_text = \"–¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞ üëâ –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–±–ª–µ–º—ã üëà\""]},{"cell_type":"code","execution_count":null,"metadata":{"id":"Vxzx-vkfDzas"},"outputs":[],"source":["# –û–±—Ä–∞–±–æ—á—Ç–∏–∫ –∫–æ–º–∞–Ω–¥—ã –±–æ—Ç—É /start\n","\n","@botFizikaRu.message_handler(commands=['start'])\n","def startBot(message):\n","\n","  hello = f\"<b>{message.from_user.first_name}</b>, –ø—Ä–∏–≤–µ—Ç!\"\n","  markup = types.ReplyKeyboardMarkup(resize_keyboard=True, row_width=2)\n","  markup.add(types.KeyboardButton(btn1_text), types.KeyboardButton(btn2_text), types.KeyboardButton(btn3_text))\n","  botFizikaRu.send_message(message.chat.id, hello, parse_mode='html', reply_markup=markup)\n","\n","  hello = \"–†–∞—Å—Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ –º–æ–∂–µ—Ç —ç—Ç–æ—Ç –±–æ—Ç?\"\n","  markup = types.InlineKeyboardMarkup()\n","  button_yes = types.InlineKeyboardButton(text = '–î–∞', callback_data='—Ä–∞—Å—Å–∫–∞–∂–∏_–º–Ω–µ')\n","  markup.add(button_yes)\n","  botFizikaRu.send_message(message.chat.id, hello, reply_markup=markup)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"J5hGOOyzCgud"},"outputs":[],"source":["# –û–±—Ä–∞–±–æ—á—Ç–∏–∫ –∫–æ–º–∞–Ω–¥—ã –±–æ—Ç—É /help\n","\n","@botFizikaRu.message_handler(commands=['help'])\n","def startBot(message):\n","\n","  hello = f\"<b>{message.from_user.first_name}</b>, –ø—Ä–∏–≤–µ—Ç! \\n–û—Ü–µ–Ω–∫–∏ –ø–æ–º–æ–≥–∞—é—Ç —É–ª—É—á—à–∞—Ç—å –æ—Ç–≤–µ—Ç—ã.\"\n","  botFizikaRu.send_message(message.chat.id, hello, parse_mode='html')\n","\n","  hello = '''–û—Ü–µ–Ω–∏–≤–∞–π —á–µ—Å—Ç–Ω–æ, –Ω–µ —Å—Ç–µ—Å–Ω—è–π—Å—è:\n","+2 –µ—Å–ª–∏ –æ—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å –ø–æ–Ω—è—Ç–µ–Ω –∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è–µ—Ç.\n","+1 –µ—Å–ª–∏ –æ—Ç–≤–µ—Ç –≤–µ—Ä–Ω—ã–π, –Ω–æ –Ω–µ–ø–æ–ª–Ω—ã–π (–æ—Ö–≤–∞—Ç —Ç–µ–º—ã) –∏–ª–∏ –Ω–µ–¥–µ—Ç–∞–ª—å–Ω—ã–π (–≥–ª—É–±–∏–Ω–∞).\n","=0 –µ—Å–ª–∏ –æ—Ç–≤–µ—Ç –≤–µ—Ä–Ω—ã–π, –Ω–æ –µ—Å—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏ –Ω–µ–ø–æ–ª–Ω–æ—Ç–∞ –∏ –Ω–µ–¥–µ—Ç–∞–ª—å–Ω–æ—Å—Ç—å.\n","-1 –µ—Å–ª–∏ –æ—Ç–≤–µ—Ç –≤ —Ü–µ–ª–æ–º –≤–µ—Ä–Ω—ã–π, –Ω–æ –µ—Å—Ç—å –Ω–µ—Ç–æ—á–Ω–æ—Å—Ç–∏ –∏–ª–∏ 1 –æ—à–∏–±–∫–∞.\n","-2 –µ—Å–ª–∏ –æ—Ç–≤–µ—Ç –Ω–µ –ø–æ —Ç–µ–º–µ –≤–æ–ø—Ä–æ—Å–∞ –∏–ª–∏ —Å–æ–¥–µ—Ä–∂–∏—Ç 2 –∏ –±–æ–ª–µ–µ –æ—à–∏–±–æ–∫.\n","–ó–∞–¥–∞–≤–∞–π –≤–æ–ø—Ä–æ—Å!\n","  '''\n","  botFizikaRu.send_message(message.chat.id, hello)\n","\n","  # –î–ª—è –±–∞–∑—ã –ª–æ–≥–æ–≤: +2...-2 –ø–µ—Ä–µ–∫–æ–¥–∏—Ä—É—é—Ç—Å—è –≤ 5...1, —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å 0 –∫–∞–∫ –Ω–µ—Ç_–æ—Ü–µ–Ω–∫–∏\n","  # 6 - —Ä–µ–∑–µ—Ä–≤\n","  # 7 - —é–∑–µ—Ä —Å–æ–∑–¥–∞–ª –ø–µ—Ä–≤–∏—á–Ω–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –≤ —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫—É\n","  # 8 - —Ä–µ–∑–µ—Ä–≤\n","  # 9 - —Ä–µ–∑–µ—Ä–≤\n","  # 0 - –Ω–µ—Ç –æ—Ü–µ–Ω–∫–∏ —é–∑–µ—Ä–æ–º –æ—Ç–≤–µ—Ç–∞ –±–æ—Ç—É –∏–ª–∏ –¥—Ä—É–≥–∞—è —Å–∏—Ç—É–∞—Ü–∏—è, —Ç—Ä–µ–±—É—é—â–∞—è –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤\n"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"El5H53QeG-wB"},"outputs":[],"source":["# –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞\n","\n","@botFizikaRu.callback_query_handler(func=lambda call:True)\n","def response(function_call):\n","\n","  if function_call.message:\n","\n","      chat_id = function_call.message.chat.id\n","\n","      if function_call.data == \"—Ä–∞—Å—Å–∫–∞–∂–∏_–º–Ω–µ\":\n","        text = \"–ü–æ–∫–∞ —è —É–º–µ—é —Ç–æ–ª—å–∫–æ —É–∑–Ω–∞–≤–∞—Ç—å, —á—Ç–æ –º–Ω–µ –Ω–∞–ø–∏—Å–∞–ª–∏: —è –ø–æ–≤—Ç–æ—Ä—è—é –Ω–∞–ø–∏—Å–∞–Ω–Ω–æ–µ –º–Ω–µ. \\n–í –¥–∞–ª—å–Ω–µ–π—à–µ–º —è —Å–º–æ–≥—É –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ —Ç–≤–æ–∏ –≤–æ–ø—Ä–æ—Å—ã: –ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏ –∏–ª–∏ —Ç–µ–∫—Å—Ç–æ–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π (–≤–Ω–∏–∑—É –ø–æ—è–≤–∏–ª–∏—Å—å –¥–≤–µ –∫–Ω–æ–ø–∫–∏). \\n–ï—Å–ª–∏ –Ω—É–∂–µ–Ω —á–∞—Ç —Å–æ —Å–ª—É–∂–±–æ–π —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∏, —Ç–æ –ø–æ–¥—Ä–æ–±–Ω–æ –æ–ø–∏—à–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–±–ª–µ–º—ã (–∫–Ω–æ–ø–∫–∞ –≤ —Å–∞–º–æ–º –Ω–∏–∑—É —ç–∫—Ä–∞–Ω–∞). \\n–ó–∞–¥–∞–≤–∞–π –≤–æ–ø—Ä–æ—Å!\"\n","        markup = types.InlineKeyboardMarkup()\n","        # markup.add(types.InlineKeyboardButton(\"–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å–∞–π—Ç\", url=\"http://fizika.ru\"))\n","        mess_id = botFizikaRu.send_message(chat_id, text, parse_mode='html', reply_markup=markup).message_id\n","        botFizikaRu.delete_message(chat_id, mess_id-1)\n","\n","      # –ø–µ—Ä–µ–∫–æ–¥–∏—Ä—É–µ–º –æ—Ü–µ–Ω–∫–∏ –≤ —à–∫–∞–ª—É 1...5, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å 0 –∫–∞–∫ —Å–ª—É–∂–µ–±–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–ª–∏ –ø—Ä–∏–∑–Ω–∞–∫ —Å–±–æ—è —Å–≤—è–∑–∏ —Å —Å–µ—Ä–≤–µ—Ä–æ–º —Å –º–æ–º–µ–Ω—Ç–∞ –≤—ã–≤–æ–¥–∞ –æ—Ç–≤–µ—Ç–∞ –Ω–µ–π—Ä–æ–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç–æ–º –¥–æ –º–æ–º–µ–Ω—Ç–∞ –æ—Ü–µ–Ω–∏–≤–∞–Ω–∏—è —é–∑–µ—Ä–æ–º –æ—Ç–≤–µ—Ç–∞ –∏ –∑–∞–ø–∏—Å–∏ –≤ –±–∞–∑—É –æ—Ç–≤–µ—Ç–æ–≤\n","      if function_call.data=='-2': df_zemtec.at[lastrow_worker(chat_id),'rating_worker']=1 ; mess_id = botFizikaRu.send_message(chat_id, '–°–ø–∞—Å–∏–±–æ –∑–∞ –æ—Ü–µ–Ω–∫—É -2').message_id ; botFizikaRu.delete_message(chat_id, mess_id-1)\n","      if function_call.data=='-1': df_zemtec.at[lastrow_worker(chat_id),'rating_worker']=2 ; mess_id = botFizikaRu.send_message(chat_id, '–°–ø–∞—Å–∏–±–æ –∑–∞ –æ—Ü–µ–Ω–∫—É -1').message_id ; botFizikaRu.delete_message(chat_id, mess_id-1)\n","      if function_call.data==' 0': df_zemtec.at[lastrow_worker(chat_id),'rating_worker']=3 ; mess_id = botFizikaRu.send_message(chat_id, '–°–ø–∞—Å–∏–±–æ –∑–∞ –æ—Ü–µ–Ω–∫—É: 0').message_id ; botFizikaRu.delete_message(chat_id, mess_id-1)\n","      if function_call.data=='+1': df_zemtec.at[lastrow_worker(chat_id),'rating_worker']=4 ; mess_id = botFizikaRu.send_message(chat_id, '–°–ø–∞—Å–∏–±–æ –∑–∞ –æ—Ü–µ–Ω–∫—É +1').message_id ; botFizikaRu.delete_message(chat_id, mess_id-1)\n","      if function_call.data=='+2': df_zemtec.at[lastrow_worker(chat_id),'rating_worker']=5 ; mess_id = botFizikaRu.send_message(chat_id, '–°–ø–∞—Å–∏–±–æ –∑–∞ –æ—Ü–µ–Ω–∫—É +2').message_id ; botFizikaRu.delete_message(chat_id, mess_id-1)\n","\n","      botFizikaRu.answer_callback_query(function_call.id) # –Ω–µ –ø–æ–Ω–∏–º–∞—é —á—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ :)\n","\n","      df_zemtec.to_csv('df_zemtec.csv', index=False, header=True) # , sep='|'"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"w18Q0ndSG9pE"},"outputs":[],"source":["# –§—É–Ω–∫—Ü–∏—è —Ä–µ–∞–∫—Ü–∏–∏ –Ω–∞ 1 —É—Ä–æ–≤–µ–Ω—å –æ—Ç–≤–µ—Ç–æ–≤ –Ω–µ–π—Ä–æ—Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞: –ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏\n","\n","def level_1_simple():\n","  # sendphoto(chatid, photo)\n","  hello = '–ù–∞—à –¥–∞–ª—å–Ω–µ–π—à–∏–π —Å—Ç–∏–ª—å —Ä–∞–±–æ—Ç—ã: \\n–ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏ üëã'\n","  return hello"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"QN3ttFXDJudb"},"outputs":[],"source":["# –§—É–Ω–∫—Ü–∏—è —Ä–µ–∞–∫—Ü–∏–∏ –Ω–∞ 2 —É—Ä–æ–≤–µ–Ω—å –æ—Ç–≤–µ—Ç–æ–≤ –Ω–µ–π—Ä–æ—Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞: –¢–µ–∫—Å—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π\n","\n","def level_2_strict():\n","  # sendphoto(chatid, photo)\n","  hello = '–ù–∞—à –¥–∞–ª—å–Ω–µ–π—à–∏–π —Å—Ç–∏–ª—å —Ä–∞–±–æ—Ç—ã: \\n–¢–µ–∫—Å—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π ü§ì'\n","  return hello"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"okAJY7ZAncG_"},"outputs":[],"source":["# –§—É–Ω–∫—Ü–∏—è —Ä–µ–∞–∫—Ü–∏–∏ –Ω–∞ 3 —É—Ä–æ–≤–µ–Ω—å –æ—Ç–≤–µ—Ç–æ–≤ –Ω–µ–π—Ä–æ—Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞: –ö–æ–Ω—Ç–µ–∫—Ç –ø—Ä–æ–±–ª–µ–º—ã\n","\n","def level_3_context():\n","  # sendphoto(chatid, photo)\n","  hello = '''–°–æ–æ–±—â–∞–µ–º –¥–ª—è —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∏:\n","- –ù–∞–∑–≤–∞–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –∏–ª–∏ –º–æ–¥–µ–ª—å –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è?\n","- –ì–¥–µ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∞–ª—å–Ω–æ –≤–æ–∑–Ω–∏–∫–ª–∞ –ø—Ä–æ–±–ª–µ–º–∞?\n","- –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ?\n","–ñ–¥—É –æ—Ç–≤–µ—Ç—ã üëá –≤ –æ–¥–Ω–æ–º (!) —Å–æ–æ–±—â–µ–Ω–∏–∏.\n","'''\n","  return hello"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"eQKK1M7ogude"},"outputs":[],"source":["# –û–°–ù–û–í–ù–ê–Ø —á–∞—Å—Ç—å –±–æ—Ç–∞\n","\n","@botFizikaRu.message_handler(func=lambda message: True)\n","def handle_message(message):\n","\n","    chat_id = message.chat.id\n","    message_in = message.text ; print(f'–ò–∑ —á–∞—Ç–∞ {chat_id} –Ω–∞–ø–∏—Å–∞–ª–∏: \\r\\n- {message_in}')\n","    id_in = message.message_id\n","\n","    message_out = '–í—ã –º–Ω–µ –Ω–∞–ø–∏—Å–∞–ª–∏: \\r\\n' + message_in\n","    if message_in == btn1_text: message_out = level_1_simple()\n","    if message_in == btn2_text: message_out = level_2_strict()\n","    if message_in == btn3_text: message_out = level_3_context()\n","\n","    id_out = botFizikaRu.send_message(chat_id, message_out).message_id\n","\n","    # –¥–æ–±–∞–≤–ª—è–µ–º –∏–Ω–ª–∞–π–Ω-–∫–Ω–æ–ø–∫–∏ –¥–ª—è –æ—Ü–µ–Ω–æ–∫ —é–∑–µ—Ä–æ–≤ - 5 –∫–Ω–æ–ø–æ–∫ –≤ –æ–¥–Ω–æ–º —Ä—è–¥—É\n","    if (message_in != btn1_text and message_in != btn2_text and message_in != btn3_text):\n","      button = types.InlineKeyboardMarkup(row_width=5)\n","      minus2 = types.InlineKeyboardButton(text='-2', callback_data='-2')\n","      minus1 = types.InlineKeyboardButton(text='-1', callback_data='-1')\n","      zero_0 = types.InlineKeyboardButton(text=' 0', callback_data=' 0')\n","      plus_1 = types.InlineKeyboardButton(text='+1', callback_data='+1')\n","      plus_2 = types.InlineKeyboardButton(text='+2', callback_data='+2')\n","      button.add(minus2,minus1,zero_0,plus_1,plus_2)\n","      botFizikaRu.send_message(chat_id, '<i>–û—Ü–µ–Ω–∏—Ç–µ –æ—Ç–≤–µ—Ç –æ—Ç -2 –¥–æ +2</i>', parse_mode='html', reply_markup=button)\n","\n","    # —Å–æ—Ö—Ä–∞–Ω–∏–º –¥–∏–∞–ª–æ–≥ –≤ –¥–∞—Ç–∞—Ñ—Ä–µ–π–º –∏ –≤ —Ñ–∞–π–ª\n","    datetimenow = pd.Timestamp.today().floor('S')\n","    worker_id = message.from_user.first_name # –Ω–µ –∑–∞–±—ã—Ç—å –ø—Ä–æ —Ä–µ–∞–ª—å–Ω—ã–π id –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ –∑–∞–∫–∞–∑—á–∏–∫—É\n","    df_zemtec.loc[ len(df_zemtec.index) ] = [chat_id, worker_id, id_in, message_in, datetimenow, id_out, message_out, datetimenow,\n","                                        '{—Å—Å—ã–ª–∫–∏ –Ω–∞ –¥–æ–∫–∏}', 0,\n","                                        '{–æ—Ä–∏–≥–∏–Ω–∞–ª-—á–∞–Ω–∫–∏}', 0\n","                                        ]\n","    df_zemtec.to_csv('df_zemtec.csv', index=False, header=True) # , sep='|'"]},{"cell_type":"code","execution_count":14,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"56DpqkoBgrt7","executionInfo":{"status":"ok","timestamp":1699976020498,"user_tz":-180,"elapsed":1080204,"user":{"displayName":"–ò–≥–æ—Ä—å –ö—Ä–∏–≤—á–µ–Ω–∫–æ","userId":"14793420197005512201"}},"outputId":"9d6c30ff-d64f-4d90-ae47-158347183c34"},"outputs":[{"metadata":{"tags":null},"name":"stdout","output_type":"stream","text":["–ò–∑ —á–∞—Ç–∞ 1853427688 –Ω–∞–ø–∏—Å–∞–ª–∏: \n","- –¢—ã –æ–Ω–ª–∞–π–Ω?\n","–ò–∑ —á–∞—Ç–∞ 1853427688 –Ω–∞–ø–∏—Å–∞–ª–∏: \n","- –¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞ üëâ –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–±–ª–µ–º—ã üëà\n","–ò–∑ —á–∞—Ç–∞ 1853427688 –Ω–∞–ø–∏—Å–∞–ª–∏: \n","- üëã –ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏\n","–ò–∑ —á–∞—Ç–∞ 1853427688 –Ω–∞–ø–∏—Å–∞–ª–∏: \n","- ü§ì –¢–µ–∫—Å—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π\n","–ò–∑ —á–∞—Ç–∞ 1853427688 –Ω–∞–ø–∏—Å–∞–ª–∏: \n","- –¢—ã –æ–Ω–ª–∞–π–Ω?\n"]},{"output_type":"stream","name":"stderr","text":["2023-11-14 15:33:38,410 (__init__.py:966 MainThread) ERROR - TeleBot: \"Infinity polling: polling exited\"\n","ERROR:TeleBot:Infinity polling: polling exited\n","2023-11-14 15:33:38,412 (__init__.py:968 MainThread) ERROR - TeleBot: \"Break infinity polling\"\n","ERROR:TeleBot:Break infinity polling\n"]}],"source":["# –ò–Ω–∏—Ü–∏–∏—Ä—É–µ–º –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—É—é —Ä–∞–±–æ—Ç—É –±–æ—Ç–∞\n","\n","botFizikaRu.infinity_polling(none_stop=True)"]},{"cell_type":"markdown","metadata":{"id":"MdwxDA7KEXs1"},"source":["\n","\n","---\n","\n","---\n","\n","\n","\n","\n","\n","---\n","\n"]}],"metadata":{"colab":{"provenance":[],"authorship_tag":"ABX9TyOyS8dZA5By2J4fr1Tp8CKs"},"kernelspec":{"display_name":"Python 3","name":"python3"},"language_info":{"name":"python"}},"nbformat":4,"nbformat_minor":0}